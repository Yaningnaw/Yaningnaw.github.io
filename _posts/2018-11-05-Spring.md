---
layout: post
title: 'Springå­¦ä¹ ç¬¬ä¸€ç«  ã€ ç¬¬ä¸€èŠ‚ï¼šSpring Iocå®¹å™¨'
subtitle: 'Spring'
date: 2018-11-05
categories: æŠ€æœ¯
cover: 'https://wnliam-cn.gitee.io/yaningnaw.github.io/assets/img/jekyll-img/Spring5.jpg'
tags: Java Spring
---
# å‰è¨€
ä¸Šä¸€ç« è®²è¿‡æœ‰å…³IoCï¼ˆInversion of Control æ§åˆ¶åè½¬ï¼‰çš„å†…å®¹ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™æŒ‡çš„æ˜¯ä»€ä¹ˆï¼š  
>æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œç¼©å†™ä¸ºIoCï¼‰ï¼Œæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œå¯ä»¥ç”¨æ¥å‡ä½è®¡ç®—æœºä»£ç ä¹‹é—´çš„è€¦åˆåº¦ã€‚å…¶ä¸­æœ€å¸¸è§çš„æ–¹å¼å«åšä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼Œç®€ç§°DIï¼‰ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼å«â€œä¾èµ–æŸ¥æ‰¾â€ï¼ˆDependency Lookupï¼‰ã€‚é€šè¿‡æ§åˆ¶åè½¬ï¼Œå¯¹è±¡åœ¨è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œç”±ä¸€ä¸ªè°ƒæ§ç³»ç»Ÿå†…æ‰€æœ‰å¯¹è±¡çš„å¤–ç•Œå®ä½“ï¼Œå°†å…¶æ‰€ä¾èµ–çš„å¯¹è±¡çš„å¼•ç”¨ä¼ é€’ç»™å®ƒã€‚ä¹Ÿå¯ä»¥è¯´ï¼Œä¾èµ–è¢«æ³¨å…¥åˆ°å¯¹è±¡ä¸­ã€‚

å¥½å§ï¼Œå…¶å®æˆ‘çœ‹å®Œè¿™æ®µè¯è¿™æ®µè¯ä¹Ÿæ˜¯ä¸ˆäºŒå’Œå°šæ‘¸ä¸ç€å¤´è„‘ï¼Œå¦‚æœéè¦ç”¨æˆ‘çš„ç†è§£è¯´çš„è¯ï¼ˆåœ¨springä¸­ï¼‰ï¼Œ**æ§åˆ¶åè½¬å°±æ˜¯å°†å®ä¾‹åŒ–å¯¹è±¡çš„ä»»åŠ¡äº¤ç»™äº†IoCå®¹å™¨**ã€‚  
juoä¸ªæ¢¨å­~  
ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨newçš„æ–¹æ³•å®ä¾‹åŒ–ä¸€ä¸ªBeanå¯¹è±¡ï¼ˆå®é™…ä¸Šæ˜¯POJOï¼ŒBeanæ›´å¥½ç†è§£ä¸€äº›ï¼Œå¦‚æœæƒ³äº†è§£POJOå¯ä»¥å‚è€ƒï¼š[Beanã€POJOã€DAOã€EJBçš„åŒºåˆ«](https://blog.csdn.net/qq_32665329/article/details/83685078)ï¼‰æ¥è¿›è¡Œæ•°æ®çš„ä¼ é€’ç­‰ï¼š
```Java
Student s1 = new Student();
s1.setName("å¼ ");
s1.setAge(20);
```
ä½†æ˜¯ï¼Œåœ¨springä¸­ï¼Œå¯èƒ½ä¼šé‡‡ç”¨XMLæˆ–æ³¨è§£å¯¹Beanå¯¹è±¡è¿›è¡Œå‚æ•°æ³¨å…¥ï¼ˆæ²¡é”™å°±æ˜¯æ³¨å…¥ï¼Œåé¢ç« èŠ‚ä¼šæåˆ°å“¦ï¼‰æ‰€ä»¥å¯ä»¥è¯´springæ˜¯é‡‡ç”¨ä¾èµ–æ³¨å…¥çš„æ–¹å¼å®ç°æ§åˆ¶åè½¬çš„ï¼Œå¯ä»¥æŠŠå¯¹è±¡ä»åº”ç”¨ä¸­è§£è€¦å‡ºå»ï¼ˆä¸ªäººç†è§£ï¼‰ã€‚

æ²¡é”™ï¼Œè¿™ä¸€ç« å°±ä¼šå›´ç»•æ§åˆ¶åè½¬å¯¹Springè¿›è¡Œå­¦ä¹ ã€‚

# æ­£æ–‡

## Spring IoC å®¹å™¨
### IoC å®¹å™¨
é¦–å…ˆçœ‹ä¸€äº›æ¦‚å¿µ
>IoC å®¹å™¨  
Spring å®¹å™¨æ˜¯ Spring æ¡†æ¶çš„æ ¸å¿ƒã€‚å®¹å™¨å°†åˆ›å»ºå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬è¿æ¥åœ¨ä¸€èµ·ï¼Œé…ç½®å®ƒä»¬ï¼Œå¹¶ç®¡ç†ä»–ä»¬çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä»åˆ›å»ºåˆ°é”€æ¯ã€‚Spring å®¹å™¨ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰æ¥ç®¡ç†ç»„æˆä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ç»„ä»¶ã€‚è¿™äº›å¯¹è±¡è¢«ç§°ä¸º Spring Beans.  
é€šè¿‡é˜…è¯»é…ç½®å…ƒæ•°æ®æä¾›çš„æŒ‡ä»¤ï¼Œå®¹å™¨çŸ¥é“å¯¹å“ªäº›å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–ï¼Œé…ç½®å’Œç»„è£…ã€‚é…ç½®å…ƒæ•°æ®å¯ä»¥é€šè¿‡ XMLï¼ŒJava æ³¨é‡Šæˆ– Java ä»£ç æ¥è¡¨ç¤ºã€‚ä¸‹å›¾æ˜¯ Spring å¦‚ä½•å·¥ä½œçš„é«˜çº§è§†å›¾ã€‚ ![image](https://wnliam-cn.gitee.io/yaningnaw.github.io/assets/img/jekyll-img/20181104ioc.jpg)
Spring IoC å®¹å™¨åˆ©ç”¨ Java çš„ POJO ç±»å’Œé…ç½®å…ƒæ•°æ®æ¥ç”Ÿæˆå®Œå…¨é…ç½®å’Œå¯æ‰§è¡Œçš„ç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºã€‚  
IOC å®¹å™¨å…·æœ‰ä¾èµ–æ³¨å…¥åŠŸèƒ½çš„å®¹å™¨ï¼Œå®ƒå¯ä»¥åˆ›å»ºå¯¹è±¡ï¼ŒIOC å®¹å™¨è´Ÿè´£å®ä¾‹åŒ–ã€å®šä½ã€é…ç½®åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡åŠå»ºç«‹è¿™äº›å¯¹è±¡é—´çš„ä¾èµ–ã€‚é€šå¸¸newä¸€ä¸ªå®ä¾‹ï¼Œæ§åˆ¶æƒç”±ç¨‹åºå‘˜æ§åˆ¶ï¼Œè€Œ"æ§åˆ¶åè½¬"æ˜¯æŒ‡newå®ä¾‹å·¥ä½œä¸ç”±ç¨‹åºå‘˜æ¥åšè€Œæ˜¯äº¤ç»™Springå®¹å™¨æ¥åšã€‚åœ¨Springä¸­BeanFactoryæ˜¯IOCå®¹å™¨çš„å®é™…ä»£è¡¨è€…ã€‚


åºå·  |  æè¿°
---|---
1 |Spring BeanFactory å®¹å™¨ã€‚ å®ƒæ˜¯æœ€ç®€å•çš„å®¹å™¨ï¼Œç»™ DI æä¾›äº†åŸºæœ¬çš„æ”¯æŒï¼Œå®ƒç”¨ org.springframework.beans.factory.BeanFactory æ¥å£æ¥å®šä¹‰.  BeanFactory æˆ–è€…ç›¸å…³çš„æ¥å£ï¼Œå¦‚ BeanFactoryAwareï¼ŒInitializingBeanï¼ŒDisposableBeanï¼Œåœ¨ Spring ä¸­ä»ç„¶å­˜åœ¨å…·æœ‰å¤§é‡çš„ä¸ Spring æ•´åˆçš„ç¬¬ä¸‰æ–¹æ¡†æ¶çš„åå‘å…¼å®¹æ€§çš„ç›®çš„ã€‚ 2
2 | Spring ApplicationContext å®¹å™¨ã€‚è¯¥å®¹å™¨æ·»åŠ äº†æ›´å¤šçš„ä¼ä¸šç‰¹å®šçš„åŠŸèƒ½ï¼Œä¾‹å¦‚ä»ä¸€ä¸ªå±æ€§æ–‡ä»¶ä¸­è§£ææ–‡æœ¬ä¿¡æ¯çš„èƒ½åŠ›ï¼Œå‘å¸ƒåº”ç”¨ç¨‹åºäº‹ä»¶ç»™æ„Ÿå…´è¶£çš„äº‹ä»¶ç›‘å¬å™¨çš„èƒ½åŠ›ã€‚è¯¥å®¹å™¨æ˜¯ç”± org.springframework.context.ApplicationContext æ¥å£å®šä¹‰ã€‚
ApplicationContext å®¹å™¨åŒ…æ‹¬ BeanFactory å®¹å™¨çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæ‰€ä»¥é€šå¸¸å»ºè®®è¶…è¿‡ BeanFactoryã€‚BeanFactory ä»ç„¶å¯ä»¥ç”¨äºè½»é‡çº§çš„åº”ç”¨ç¨‹åºï¼Œå¦‚ç§»åŠ¨è®¾å¤‡æˆ–åŸºäº applet çš„åº”ç”¨ç¨‹åºï¼Œå…¶ä¸­å®ƒçš„æ•°æ®é‡å’Œé€Ÿåº¦æ˜¯æ˜¾è‘—ã€‚

### Spring BeanFactory å®¹å™¨
å…ˆæ¥ä¸€ä¸ªè¾ƒä¸ºå®˜æ–¹çš„è§£é‡Šï¼ˆæºè‡ªw3cSchoolï¼‰ï¼š
>è¿™æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„å®¹å™¨ï¼Œå®ƒä¸»è¦çš„åŠŸèƒ½æ˜¯ä¸ºä¾èµ–æ³¨å…¥ ï¼ˆDIï¼‰ æä¾›æ”¯æŒï¼Œè¿™ä¸ªå®¹å™¨æ¥å£åœ¨ org.springframework.beans.factory.BeanFactor ä¸­è¢«å®šä¹‰ã€‚BeanFactory å’Œç›¸å…³çš„æ¥å£ï¼Œæ¯”å¦‚BeanFactoryAwareã€DisposableBeanã€InitializingBeanï¼Œä»æ—§ä¿ç•™åœ¨ Spring ä¸­ï¼Œä¸»è¦ç›®çš„æ˜¯å‘åå…¼å®¹å·²ç»å­˜åœ¨çš„å’Œé‚£äº› Spring æ•´åˆåœ¨ä¸€èµ·çš„ç¬¬ä¸‰æ–¹æ¡†æ¶ã€‚  
åœ¨ Spring ä¸­ï¼Œæœ‰å¤§é‡å¯¹ BeanFactory æ¥å£çš„å®ç°ã€‚å…¶ä¸­ï¼Œæœ€å¸¸è¢«ä½¿ç”¨çš„æ˜¯ XmlBeanFactory ç±»ã€‚è¿™ä¸ªå®¹å™¨ä»ä¸€ä¸ª XML æ–‡ä»¶ä¸­è¯»å–é…ç½®å…ƒæ•°æ®ï¼Œç”±è¿™äº›å…ƒæ•°æ®æ¥ç”Ÿæˆä¸€ä¸ªè¢«é…ç½®åŒ–çš„ç³»ç»Ÿæˆ–è€…åº”ç”¨ã€‚  
åœ¨èµ„æºå®è´µçš„ç§»åŠ¨è®¾å¤‡æˆ–è€…åŸºäº applet çš„åº”ç”¨å½“ä¸­ï¼Œ BeanFactory ä¼šè¢«ä¼˜å…ˆé€‰æ‹©ã€‚å¦åˆ™ï¼Œä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ ApplicationContextï¼Œé™¤éä½ æœ‰æ›´å¥½çš„ç†ç”±é€‰æ‹© BeanFactoryã€‚

é¢ã€‚ã€‚ã€‚ä¾æ—§æ˜¯è¯´äº†ä¸€å¤§å †==ï¼Œæ— æ³•å½¢è±¡çš„è¡¨ç¤ºè¿›è¡Œç†è§£ï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„Springåº”ç”¨ç¨‹åºæ¥ä½“ä¼šä»€ä¹ˆæ˜¯Springå®¹å™¨ã€‚
1. é¦–å…ˆåœ¨ä½ çš„IDEä¸­åˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œå¹¶åœ¨**src**æ–‡ä»¶å¤¹ä¸‹æ–°å»ºåŒ…æˆ–æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œæˆ‘ä»¬åˆ›å»ºåä¸ºcom.helloåŒ…
2. å°†Springçš„åº“æ–‡ä»¶ï¼ˆ.jaråŒ…ï¼‰å¯¼å…¥é¡¹ç›®ä¸­ï¼ˆå¯ä»¥ç›´æ¥å¯¼å…¥ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·å¦‚ï¼šMavenã€Gradleç­‰å¯¼å…¥ï¼‰
3. åœ¨com.helloä¸‹åˆ›å»ºHelloWorld.javaï¼Œåœ¨srcä¸‹åˆ›å»ºMain.java
```Java
 package com.hello;
public class HelloWorld {
   private String message;
   //è¿™é‡Œéœ€è¦è®¾ç½®setï¼Œgetæ–¹æ³•ç”¨äºä¹‹åå®¹å™¨å¯¹å¯¹è±¡å±æ€§è¿›è¡Œæ³¨å…¥
   public void setMessage(String message){
    this.message  = message;
   }
   public void getMessage(){
    System.out.println("Message : " + message);
   }
}
```
```Java
import org.springframework.beans.factory.InitializingBean;
import org.springframework.beans.factory.xml.XmlBeanFactory;
import org.springframework.core.io.ClassPathResource;
public class Main {
   public static void main(String[] args) {
      //å®ä¾‹åŒ–XmlBeanFactoryå®¹å™¨ï¼Œä¼šåˆ©ç”¨ ClassPathResource() API å»åŠ è½½åœ¨è·¯å¾„ CLASSPATH ä¸‹å¯ç”¨çš„ bean é…ç½®æ–‡ä»¶ï¼Œåˆå§‹åŒ–åˆ›å»ºå¹¶åˆå§‹åŒ–é…ç½®æ–‡ä»¶ä¸­çš„å¯¹è±¡
      XmlBeanFactory factory = new XmlBeanFactory
                             (new ClassPathResource("ioc.xml"));
      //é€šè¿‡é…ç½®æ–‡ä»¶ä¸­çš„ bean ID æ¥è¿”å›ä¸€ä¸ªçœŸæ­£çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ€åå¯ä»¥ç”¨äºå®é™…çš„å¯¹è±¡ã€‚ä¸€æ—¦å¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œä½ å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªå¯¹è±¡æ¥è°ƒç”¨ä»»ä½•æ–¹æ³•ã€‚
      HelloWorld obj = (HelloWorld) factory.getBean("helloWorld");
      obj.getMessage();
   }
}
```

4.åœ¨srcä¸‹åˆ›å»ºå®¹å™¨çš„é…ç½®æ–‡ä»¶ioc.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
   <!--
   idæ˜¯ç”¨äºä¹‹åiocå®¹å™¨è·å–ï¼Œè€Œpropertyæ˜¯æŒ‡ä½¿ç”¨setæ–¹æ³•æ³¨å…¥ä¾èµ–å…³ç³»ï¼ˆä¹‹åè¯¦ç»†æåŠï¼‰
   -->
   <bean id="helloWorld" class="com.tutorialspoint.HelloWorld">
       <property name="message" value="Hello World!"/>
   </bean>

</beans>
```
æœ€åè¿è¡Œå¾—åˆ°çš„ç»“æœåº”è¯¥æ˜¯ï¼š
```Java
message: Hello World!
```

### Spring ApplicationContext å®¹å™¨
ä¸€äº›èµ˜è¿°ï¼ˆæ¯”è¾ƒå®˜æ–¹çš„ä¸œè¥¿ä»¥åæ¥çœ‹æ²¡å‡†æœ‰ä¸åŒçš„ä½“ä¼šï¼‰ï¼š
>Spring ApplicationContext å®¹å™¨     
Application Context æ˜¯ BeanFactory çš„å­æ¥å£ï¼Œä¹Ÿè¢«æˆä¸º Spring ä¸Šä¸‹æ–‡ã€‚  
Application Context æ˜¯ spring ä¸­è¾ƒé«˜çº§çš„å®¹å™¨ã€‚å’Œ BeanFactory ç±»ä¼¼ï¼Œå®ƒå¯ä»¥åŠ è½½é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ beanï¼Œå°†æ‰€æœ‰çš„ bean é›†ä¸­åœ¨ä¸€èµ·ï¼Œå½“æœ‰è¯·æ±‚çš„æ—¶å€™åˆ†é… beanã€‚ å¦å¤–ï¼Œå®ƒå¢åŠ äº†ä¼ä¸šæ‰€éœ€è¦çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼Œä»å±æ€§æ–‡ä»¶ä¸­è§£ææ–‡æœ¬ä¿¡æ¯å’Œå°†äº‹ä»¶ä¼ é€’ç»™æ‰€æŒ‡å®šçš„ç›‘å¬å™¨ã€‚è¿™ä¸ªå®¹å™¨åœ¨ org.springframework.context.ApplicationContext interface æ¥å£ä¸­å®šä¹‰ã€‚  
ApplicationContext åŒ…å« BeanFactory æ‰€æœ‰çš„åŠŸèƒ½ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç›¸å¯¹äº BeanFactoryï¼ŒApplicationContext ä¼šæ›´åŠ ä¼˜ç§€ã€‚å½“ç„¶ï¼ŒBeanFactory ä»å¯ä»¥åœ¨è½»é‡çº§åº”ç”¨ä¸­ä½¿ç”¨ï¼Œæ¯”å¦‚ç§»åŠ¨è®¾å¤‡æˆ–è€…åŸºäº applet çš„åº”ç”¨ç¨‹åºã€‚  
æœ€å¸¸è¢«ä½¿ç”¨çš„ ApplicationContext æ¥å£å®ç°ï¼š
>- FileSystemXmlApplicationContextï¼šè¯¥å®¹å™¨ä» XML æ–‡ä»¶ä¸­åŠ è½½å·²è¢«å®šä¹‰çš„ beanã€‚åœ¨è¿™é‡Œï¼Œä½ éœ€è¦æä¾›ç»™æ„é€ å™¨ XML æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚  
>- ClassPathXmlApplicationContextï¼šè¯¥å®¹å™¨ä» XML æ–‡ä»¶ä¸­åŠ è½½å·²è¢«å®šä¹‰çš„ beanã€‚åœ¨è¿™é‡Œï¼Œä½ ä¸éœ€è¦æä¾› XML æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œåªéœ€æ­£ç¡®é…ç½® CLASSPATH ç¯å¢ƒå˜é‡å³å¯ï¼Œå› ä¸ºï¼Œå®¹å™¨ä¼šä» CLASSPATH ä¸­æœç´¢ bean é…ç½®æ–‡ä»¶ã€‚
>- WebXmlApplicationContextï¼šè¯¥å®¹å™¨ä¼šåœ¨ä¸€ä¸ª web åº”ç”¨ç¨‹åºçš„èŒƒå›´å†…åŠ è½½åœ¨ XML æ–‡ä»¶ä¸­å·²è¢«å®šä¹‰çš„ beanã€‚

ä¹‹å‰å·²ç»å¯¹BeanFactoryè¿›è¡Œäº†ç¤ºä¾‹ï¼Œåœ¨å¯¼åŒ…ç­‰æ­¥éª¤æ²¡æœ‰å…¶ä»–åŒºåˆ«ï¼Œæˆ‘ä»¬åªçœ‹åœ¨å®¹å™¨åˆå§‹åŒ– çš„Mainæ–¹æ³•ä¸Šçš„åŒºåˆ«:  
FileSystemXmlApplicationContext

```Java
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.FileSystemXmlApplicationContext;
public class MainApp {
   public static void main(String[] args) {
      ApplicationContext context = new FileSystemXmlApplicationContext
            ("C:workspace/HelloSpring/src/ioc.xml");
      HelloWorld obj = (HelloWorld) context.getBean("helloWorld");
      obj.getMessage();
   }
}
```
ClassPathXmlApplicationContextï¼š
```Java
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
package com.hello.HelloWorld;

public class MainApp {
   public static void main(String[] args) {
      ApplicationContext ac = new ClassPathXmlApplicationContext(
						"scope.xml");
	//è·å¾—å¯¹è±¡ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰
	HelloWorld hello = ac.getBean("helloWorld",HelloWorld.class);
      hello.getMessage();
   }
}
```
å‘ç°æœ‰ä»€ä¹ˆä¸åŒå˜›ï¼Ÿå†çœ‹ä¸€éï¼š
```Java
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
public class MainApp {
   public static void main(String[] args) {
      ApplicationContext context = 
             new ClassPathXmlApplicationContext("Beans.xml");
      HelloWorld obj = (HelloWorld) context.getBean("helloWorld");
      obj.getMessage();
   }
}
```
è¿™äº›æ —å­åº”è¯¥èƒ½æ‰¾åˆ°å…¶ä¸­çš„è§„å¾‹å§ï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªå°±æ€»ç»“ä¸€ä¸‹ï¼Œä¹‹åä¼šæœ‰ä¸“é—¨çš„ç« èŠ‚è®²WebApplicationContextã€‚
>XmlWebApplicationContextï¼šä»Webç³»ç»Ÿä¸­çš„XMLæ–‡ä»¶æ¥è½½å…¥Beanå®šä¹‰çš„ä¿¡
```Java
ServletContext servletContext = request.getSession().getServletContext();    
ApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(servletContext);
```
é…ç½®WebApplicationContextçš„ä¸¤ç§æ–¹æ³•ï¼š
1. åˆ©ç”¨Listeneræ¥å£æ¥å®ç°

```xml
<listener>

       <listener-class>

org.springframework.web.context.ContextLoaderListener

</listener-class>

</listener>

<context-param>

       <param-name>contextConfigLocation</param-name>

       <param-value>classpath:applicationContext</param-value>

</context-param>
```
2. åˆ©ç”¨Servletæ¥å£æ¥å®ç°

```xml
<context-param>

<param-name>contextConfigLocation</param-name>

<param-value>classpath:applicationContext</param-value>

</context-param>
```

```xml
<Servlet>

       <servlet-name>context</servlet-name>

       <servlet-class>

           org.springframework.web.context.ContextLoaderServlet

       </servlet-class>

</servlet>
```

## Spring Bean
### Spring Bean å®šä¹‰
>è¢«ç§°ä½œ bean çš„å¯¹è±¡æ˜¯æ„æˆåº”ç”¨ç¨‹åºçš„æ”¯æŸ±ä¹Ÿæ˜¯ç”± Spring IoC å®¹å™¨ç®¡ç†çš„ã€‚bean æ˜¯ä¸€ä¸ªè¢«å®ä¾‹åŒ–ï¼Œç»„è£…ï¼Œå¹¶é€šè¿‡ Spring IoC å®¹å™¨æ‰€ç®¡ç†çš„å¯¹è±¡ã€‚è¿™äº› bean æ˜¯ç”±ç”¨å®¹å™¨æä¾›çš„é…ç½®å…ƒæ•°æ®åˆ›å»ºçš„ï¼Œä¾‹å¦‚ï¼Œå·²ç»åœ¨å…ˆå‰ç« èŠ‚çœ‹åˆ°çš„ï¼Œåœ¨ XML çš„è¡¨å•ä¸­çš„ å®šä¹‰ã€‚

é…ç½®å…ƒæ•°æ®ï¼ˆåˆ›å»ºå¯¹è±¡ï¼‰  
**æ³¨æ„ï¼æ¥ä¸‹æ¥çš„é…ç½®æ–‡ä»¶xmlä¼šä»¥ä¸åŒçš„åç§°è¡¨ç°åœ¨ä¸åŒç« èŠ‚ï¼Œè¯¥ç« èŠ‚çš„xmlæ–‡ä»¶åä¸è¯¥ç« èŠ‚çš„å®¹å™¨å¯åŠ¨æ—¶åŠ è½½çš„xmlæ–‡ä»¶åå°†ä¼šç›¸åŒï¼Œ**
1. ä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºå¯¹è±¡
```Java
package ioc; 
public class B{
    public B(){
        //ç»™ç±»æ·»åŠ æ— å‚æ„é€ å™¨ï¼Œè™½ç„¶é»˜è®¤æœ‰è¯¥æ„é€ å™¨ï¼Œè¿™é‡Œä½œä¸ºè¯´æ˜ã€‚
    }
}
```
```xml
<!-- ä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºå¯¹è±¡-->
<beans>
<bean id="b1" class="ioc.B"/>
</beans>
```
>classï¼šè¿™ä¸ªå±æ€§æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œå¹¶ä¸”æŒ‡å®šç”¨æ¥åˆ›å»º bean çš„ bean ç±»ã€‚ï¼ˆä½¿ç”¨å…¨é™å®šåï¼‰
idï¼šæŒ‡å®šbeançš„åç§°,å”¯ä¸€ï¼ˆä¼šé€šè¿‡idè·å¾—å¯¹è±¡ï¼‰ã€‚
```Java
//å¯åŠ¨springå®¹å™¨
ApplicationContext ac = new ClassPathXmlApplicationContext("bean.xml");
//è·å–å¯¹è±¡
B b1 = (B)ac.getBean("b1");//å› ä¸ºè¿”å›çš„æ˜¯Objectç±»ï¼Œæ‰€ä»¥éœ€è¦å¼ºè½¬
B b1 = ac.getBean("b1",B.class)//æŒ‡å®šè¿”å›ç±»å‹ï¼Œä¸éœ€è¦å¼ºè½¬
```
è¿™æ ·å°±å¯ä»¥è¿›è¡Œæ— å‚æ„é€ å™¨æ–¹å¼çš„åˆ›å»ºå¯¹è±¡äº†ï¼
2. ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼š  

```xml
<bean id="cal1" 
class="java.util.Calendar"
factory-method="getInstance">
</bean>
```
>factory-mothodï¼šè°ƒç”¨å·¥å‚æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡  
ï¼ˆå‰æï¼šè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ª**é™æ€**æ–¹æ³•ã€‚ï¼‰  

è¿›è¡Œè·å–ï¼š
```Java

ApplicationContext ac = new ClassPathXmlApplicationContext("bean.xml");

Calendar cal1 = ac.getBean("cal1",B.class)
```
3. ä½¿ç”¨å®ä¾‹å·¥å‚æ–¹æ³•åˆ›å»ºå¯¹è±¡

```xml
<bean id="time1" 
	 factory-bean="cal1"
	 factory-method="getTime"
	 ></bean>
```
>å“‡ï¼Œæ²¡æœ‰æŒ‡å®šç±»å°±å¯ä»¥å•¦ï¼Ÿ  
åŸå› ï¼šspringå®¹å™¨**æ­¤æ—¶å¯ä»¥è°ƒç”¨cal1å¯¹è±¡çš„getTimeæ–¹æ³•åˆ›å»ºå¯¹è±¡**

### Spring Beanä½œç”¨åŸŸ
é¦–å…ˆæˆ‘ä»¬å†™ä¸€ä¸ªå®ä¾‹ï¼š(ä¸ºäº†åŒºåˆ«)
```xml
<bean id="s1" class="scope.ScopeBean"/>
```
```Java
//å¯åŠ¨springå®¹å™¨
ApplicationContext ac = new ClassPathXmlApplicationContext("scope.xml");
//è·å¾—å¯¹è±¡ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰
ScopeBean s1 = ac.getBean("s1",ScopeBean.class);
ScopeBean s2 = ac.getBean("s1",ScopeBean.class);
//æµ‹è¯•s1s2æ˜¯å¦ä¸ºåŒä¸€ä¸ªå¯¹è±¡
System.out.println(s1 == s2);
```
è¿”å›å€¼æ˜¯trueï¼
>æ€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå¦‚ä½•åˆ›å»ºå¤šä¸ªå®ä¾‹å‘¢ï¼Ÿè¿™å°±è¦æåˆ°Spring Beançš„ä½œç”¨åŸŸäº†

**Bean çš„ä½œç”¨åŸŸ**  
å½“åœ¨ Spring ä¸­å®šä¹‰ä¸€ä¸ª bean æ—¶ï¼Œä½ å¿…é¡»å£°æ˜è¯¥ bean çš„ä½œç”¨åŸŸçš„é€‰é¡¹ã€‚
>å¦‚æœä¸ºäº†å¼ºåˆ¶ Spring åœ¨æ¯æ¬¡éœ€è¦æ—¶éƒ½äº§ç”Ÿä¸€ä¸ªæ–°çš„ bean å®ä¾‹ï¼Œä½ åº”è¯¥å£°æ˜ bean çš„ä½œç”¨åŸŸçš„å±æ€§ä¸º prototypeã€‚

>å¦‚æœä½ æƒ³è®© Spring åœ¨æ¯æ¬¡éœ€è¦æ—¶éƒ½è¿”å›åŒä¸€ä¸ªbeanå®ä¾‹ï¼Œä½ åº”è¯¥å£°æ˜ bean çš„ä½œç”¨åŸŸçš„å±æ€§ä¸º singletonã€‚

æ­¤æ—¶å°±æåˆ°äº†Spring æ¡†æ¶æ”¯æŒä»¥ä¸‹äº”ä¸ªä½œç”¨åŸŸï¼Œåˆ†åˆ«ä¸ºsingletonã€prototypeã€requestã€sessionå’Œglobal sessionï¼Œ5ç§ä½œç”¨åŸŸã€‚


1. **singleton**

>å—¯ã€‚ã€‚ã€‚ä½ æ²¡çœ‹é”™å°±æ˜¯å•ä¾‹çš„ï¼Œè¦çŸ¥é“å•ä¾‹æ¨¡å¼çš„å¯¹è±¡åœ¨ç”Ÿäº§å’Œå·¥ä½œå‡ºç°æ˜¯å¾ˆé¢‘ç¹çš„ï¼Œæ‰€ä»¥springä¹Ÿæä¾›äº†äº§ç”Ÿå•ä¾‹å¯¹è±¡çš„æ–¹æ³•

ç°åœ¨æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªå•ä¾‹å¯¹è±¡
```xml
<bean id="s1" class="scope.ScopeBean" scope="singleton"/>
```
```Java
ApplicationContext ac = new ClassPathXmlApplicationContext("scope.xml");
ScopeBean s1 = ac.getBean("s1",ScopeBean.class);
ScopeBean s2 = ac.getBean("s1",ScopeBean.class);
System.out.println(s1 == s2);
```
>å“ˆå“ˆï¼Œç°åœ¨å‘ç°äº†ä»€ä¹ˆå˜›ï¼Œspringä¸æŒ‡å®šscopeæ—¶ï¼Œ**å…¶å®é»˜è®¤æƒ…å†µä¸‹åˆ›å»ºçš„å¯¹è±¡æ˜¯å•ä¾‹çš„**

é‚£å°±æ„å‘³ç€ï¼šå¦‚æœå°†åˆ›å»ºBeanæ—¶çš„scopeå±æ€§è®¾å®šä¸ºsingletonæˆ–è€…ä¸è¿›è¡Œè®¾å®šï¼Œé‚£ä¹ˆå®¹å™¨åœ¨è·å–å¯¹è±¡æ—¶ä¼šåˆ›å»ºåŒä¸€ä¸ªå¯¹è±¡ï¼
2. **prototype**

åˆšæ‰æåˆ°çš„singletonæƒ…å†µï¼Œåªéœ€è¦æŠŠscopeå±æ€§è®¾å®šä¸ºprototypeï¼Œå°±å¯ä»¥åœ¨æ¯æ¬¡ä»å®¹å™¨ä¸­è°ƒç”¨Beanæ—¶ï¼Œéƒ½è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå³æ¯æ¬¡è°ƒç”¨getBean()æ—¶ï¼Œç›¸å½“äºæ‰§è¡ŒnewXxxBean()ã€‚  
è¿˜ç­‰ä»€ä¹ˆï¼Œå¿«å»è¯•è¯•å§ï¼

- **++ä»¥ä¸‹ä½œç”¨åŸŸåªé€‚ç”¨äºWebApplicationContextç¯å¢ƒ++**
3. **request**

æ¯æ¬¡HTTPè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Beanï¼Œè¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒ

4. **session**

åŒä¸€ä¸ªHTTP Sessionå…±äº«ä¸€ä¸ªBeanï¼Œä¸åŒSessionä½¿ç”¨ä¸åŒçš„Beanï¼Œä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒ

5. **global-session**

ä¸€èˆ¬ç”¨äºPortletåº”ç”¨ç¯å¢ƒï¼Œè¯¥è¿ç”¨åŸŸä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒ

### Spring Beanç”Ÿå‘½å‘¨æœŸ
>Beançš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥è¡¨è¾¾ä¸ºï¼šBeançš„å®šä¹‰â€”â€”Beançš„åˆå§‹åŒ–â€”â€”Beançš„ä½¿ç”¨â€”â€”Beançš„é”€æ¯
>1. å®šä¹‰
>2. åˆå§‹åŒ–ï¼ˆåˆ†é…èµ„æºï¼‰
>3. ä½¿ç”¨
>4. é”€æ¯ï¼ˆé‡Šæ”¾èµ„æºï¼‰

Springä¸­æœ‰åˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•æ¥æ§åˆ¶Spring Beançš„ç”Ÿå‘½å‘¨æœŸ
#### åˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•
```Java
package scope;
public class MessageBean {
    public MessageBean() {
		System.out.println("MessageBean()");
}
	public void init() {
		System.out.println("init()");
	}
	public void sendMsg{
	    System.out.println("sendMsg()");
	}
	public void destory() {
		System.out.println("destory()");
	}
}
```
>çœ‹ä¸€ä¸ªç¤ºä¾‹(æ¨¡æ‹Ÿæœ‰ä¸Šè¿°æ–¹æ³•)
```xml
<bean id="mb1" class="scope.MessageBean"
	init-method="init"
	destroy-method="destory"> </bean>
```
**init-method**å’Œ**destroy-method**åˆ†åˆ«åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®è°ƒç”¨çš„**åˆå§‹åŒ–æ–¹æ³•**å’Œ**é”€æ¯æ–¹æ³•**,ï¼ˆåœ¨Beanåˆå§‹åŒ–å’Œé”€æ¯æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œåˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼‰  
è°ƒç”¨è¯¥æ–¹æ³•çš„sendMsgå¹¶è¿›è¡Œå…³é—­å®¹å™¨å°±å¯ä»¥æ¼”ç¤ºæ•ˆæœï¼š
```Java
//æµ‹è¯•ç”Ÿå‘½å‘¨æœŸ
//AbstractApplicationContextæ˜¯ApplicationContextçš„å­æ¥å£ï¼ŒClassPathXmlApplicationContextå®ç°äº†ApplicationContextï¼Œåªæœ‰AbstractApplicationContextä¸­æ‰æœ‰å…³é—­å®¹å™¨çš„æ–¹æ³•ã€‚
AbstractApplicationContext ac = new ClassPathXmlApplicationContext("scope.xml");
	MessageBean m1 = ac.getBean("mb1",MessageBean.class) ;
	m1.sendMsg();
	ac.close();
```
1. åˆå§‹åŒ–å›è°ƒ  
>org.springframework.beans.factory.InitializingBean æ¥å£æŒ‡å®šä¸€ä¸ªå•ä¸€çš„æ–¹æ³•ï¼š
```Java
void afterPropertiesSet() throws Exception;
```
å¯ä»¥ç®€å•çš„å®ç°è¯¥æ¥å£è¿›è¡Œåˆå§‹åŒ–
```Java
public class ExampleBean implements InitializingBean {
   public void afterPropertiesSet() {
      // do some initialization work
   }
}
```
```xml
<bean id="exampleBean" 
      class="examples.ExampleBean"
      init-method="init"/>
```
2. é”€æ¯å›è°ƒ
>org.springframework.beans.factory.DisposableBean æ¥å£æŒ‡å®šä¸€ä¸ªå•ä¸€çš„æ–¹æ³•ï¼š
```Java
void destroy() throws Exception;
```
åŒç†ï¼š
```Java
public class ExampleBean implements DisposableBean {
   public void destroy() {
      // do some destruction work
   }
}
```
```xml
<bean id="exampleBean"
         class="examples.ExampleBean"
         destroy-method="destroy"/>
```
å¤§ä½¬è¯´çš„ä¸€äº›ç»†èŠ‚0.0ï¼š
>å¦‚æœä½ åœ¨é web åº”ç”¨ç¨‹åºç¯å¢ƒä¸­ä½¿ç”¨ Spring çš„ IoC å®¹å™¨ï¼›ä¾‹å¦‚åœ¨ä¸°å¯Œçš„å®¢æˆ·ç«¯æ¡Œé¢ç¯å¢ƒä¸­ï¼›é‚£ä¹ˆåœ¨ JVM ä¸­ä½ è¦æ³¨å†Œå…³é—­ hookã€‚è¿™æ ·åšå¯ä»¥ç¡®ä¿æ­£å¸¸å…³é—­ï¼Œä¸ºäº†è®©æ‰€æœ‰çš„èµ„æºéƒ½è¢«é‡Šæ”¾ï¼Œå¯ä»¥åœ¨å•ä¸ª beans ä¸Šè°ƒç”¨ destroy æ–¹æ³•ã€‚  
å»ºè®®ä½ ä¸è¦ä½¿ç”¨ InitializingBean æˆ–è€… DisposableBean çš„å›è°ƒæ–¹æ³•ï¼Œå› ä¸º XML é…ç½®åœ¨å‘½åæ–¹æ³•ä¸Šæä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚

### Spring Beanå»¶è¿ŸåŠ è½½
ç›´æ¥ä¸Šæ —å­äº†ğŸ’ªï¼š
```Java
ApplicationContext ac = new ClassPathXmlApplicationContext("scope.xml");
		//springå®¹å™¨å¯åŠ¨ä¼šè‡ªåŠ¨å°†å•ä¾‹beanåˆ›å»ºå¥½
		//å¯è®¾ç½®å»¶è¿ŸåŠ è½½ï¼Œåœ¨beanä¸­(æ‡’åŠ è½½)
```
>ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œä»ä½œç”¨åŸŸä¸€èŠ‚å¼€å§‹ï¼Œxmlæ²¡æœ‰è¿›è¡Œæ”¹å˜ã€‚   
ï¼ï¼ï¼ä¸ºå•¥æˆ‘å•¥éƒ½æ²¡è°ƒæ˜¾ç¤ºæœ‰å¯¹è±¡åˆ›å»ºäº†å‘¢ï¼Ÿ

==Springåœ¨å¯åŠ¨æ—¶ï¼Œä¼šæ£€æŸ¥åˆ°**ä½œç”¨åŸŸä¸ºå•ä¾‹**çš„Beanå¹¶è‡ªåŠ¨å®ä¾‹åŒ–==ï¼Œ
è€Œå»¶è¿ŸåŠ è½½å¯ä»¥å–æ¶ˆè¿™ä¸€æ“ä½œï¼Œç­‰è°ƒç”¨æ—¶å†è¿›è¡Œå®ä¾‹åŒ–ï¼š
```xml
<bean id="mb1" class="scope.MessageBean"
	init-method="init"
	destroy-method="destory"
	lazy-init="true">
	<!--è¿™æ˜¯ä¸ªç¼ºçœçš„singleton Bean-->
```
>æŒ‡å®šæ˜¯å¦å»¶è¿ŸåŠ è½½ï¼Œå€¼ä¸ºtrueæ—¶å»¶è¿ŸåŠ è½½ï¼Œç¼ºçœå€¼ä¸ºfalseã€‚

### Spring Beanåç½®å¤„ç†å™¨

èµ˜è¿° x N (=_=)
>Bean åç½®å¤„ç†å™¨å…è®¸åœ¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•å‰åå¯¹ Bean è¿›è¡Œé¢å¤–çš„å¤„ç†ã€‚  
**BeanPostProcessor** æ¥å£å®šä¹‰å›è°ƒæ–¹æ³•ï¼Œä½ å¯ä»¥å®ç°è¯¥æ–¹æ³•æ¥æä¾›è‡ªå·±çš„å®ä¾‹åŒ–é€»è¾‘ï¼Œä¾èµ–è§£æé€»è¾‘ç­‰ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ Spring å®¹å™¨é€šè¿‡æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ª BeanPostProcessor çš„å®ç°æ¥å®Œæˆå®ä¾‹åŒ–ï¼Œé…ç½®å’Œåˆå§‹åŒ–ä¸€ä¸ªbeanä¹‹åå®ç°ä¸€äº›è‡ªå®šä¹‰é€»è¾‘å›è°ƒæ–¹æ³•ã€‚  
ä½ å¯ä»¥é…ç½®å¤šä¸ª BeanPostProcessor æ¥å£ï¼Œé€šè¿‡è®¾ç½® BeanPostProcessor å®ç°çš„ Ordered æ¥å£æä¾›çš„ order å±æ€§æ¥æ§åˆ¶è¿™äº› BeanPostProcessor æ¥å£çš„æ‰§è¡Œé¡ºåºã€‚  
BeanPostProcessor å¯ä»¥å¯¹ beanï¼ˆæˆ–å¯¹è±¡ï¼‰å®ä¾‹è¿›è¡Œæ“ä½œï¼Œè¿™æ„å‘³ç€ Spring IoC å®¹å™¨å®ä¾‹åŒ–ä¸€ä¸ª bean å®ä¾‹ï¼Œç„¶å BeanPostProcessor æ¥å£è¿›è¡Œå®ƒä»¬çš„å·¥ä½œã€‚  
ApplicationContext ä¼šè‡ªåŠ¨æ£€æµ‹ç”± BeanPostProcessor æ¥å£çš„å®ç°å®šä¹‰çš„ beanï¼Œæ³¨å†Œè¿™äº› bean ä¸ºåç½®å¤„ç†å™¨ï¼Œç„¶åé€šè¿‡åœ¨å®¹å™¨ä¸­åˆ›å»º beanï¼Œåœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨å®ƒã€‚

```Java
package scope;
public class MessageBean {
    private String message;
    public MessageBean() {
		this.message  = message;
}
	public void init() {
		System.out.println("init()");
	}
	public void sendMsg{
	    System.out.println("sendMsg()");
	}
	public void destory() {
		System.out.println("destory()");
	}
}
```
>è¿™æ˜¯å®ç° BeanPostProcessor çš„éå¸¸ç®€å•çš„ä¾‹å­ï¼Œå®ƒåœ¨ä»»ä½• bean çš„åˆå§‹åŒ–çš„ä¹‹å‰å’Œä¹‹åè¾“å…¥è¯¥ bean çš„åç§°ã€‚ä½ å¯ä»¥åœ¨åˆå§‹åŒ– bean çš„ä¹‹å‰å’Œä¹‹åå®ç°æ›´å¤æ‚çš„é€»è¾‘ï¼Œå› ä¸ºä½ æœ‰ä¸¤ä¸ªè®¿é—®å†…ç½® bean å¯¹è±¡çš„åç½®å¤„ç†ç¨‹åºçš„æ–¹æ³•ã€‚
```Java
import org.springframework.beans.factory.config.BeanPostProcessor;
import org.springframework.beans.BeansException;
public class InitMessage implements BeanPostProcessor {
   public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
      System.out.println("BeforeInitialization : " + beanName);
      return bean;  // you can return any other object as well
   }
   public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
      System.out.println("AfterInitialization : " + beanName);
      return bean;  // you can return any other object as well
   }
}
```
```Java
AbstractApplicationContext ac = new ClassPathXmlApplicationContext("scope.xml");
	MessageBean m1 = ac.getBean("mb1",MessageBean.class) ;
	m1.sendMsg();
	ac.close();
```
æ¼”ç¤ºä¹‹åå°±æ˜ç™½äº†ï¼

## æœ¬æ–‡ç”¨äºä¸ªäººå­¦ä¹ å’Œåˆ†äº«ï¼Œå¤šå¤„å€Ÿé‰´ï¼Œå¦‚æœ‰ä¸è¶³ä¹‹å¤„è¯·æŒ‡æ­£